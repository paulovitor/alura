<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Aprendendo IndexedDB</title>
</head>

<body>
    <script src="js/app/models/Negociacao.js"></script>
    <script src="js/app/services/ConnectionFactory.js"></script>
    <script src="js/app/daos/NegociacaoDao.js"></script>
    <script>
        function adiciona() {
            let negociacao = new Negociacao(new Date(), 200, 1);

            ConnectionFactory
                .getConnection()
                .then(connection => new NegociacaoDao(connection).adiciona(negociacao));
        }

        function listaTodos() {
            ConnectionFactory
                .getConnection()
                .then(connection => {
                    new NegociacaoDao(connection)
                        .listaTodos()
                        .then(negociacoes => console.log(negociacoes));
                });
        }
    </script>
</body>

</html>